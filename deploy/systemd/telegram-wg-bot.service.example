# /etc/systemd/system/telegram-wg-bot.service
# Ğ–Ğ•Ğ›Ğ•Ğ—ĞĞ‘Ğ•Ğ¢ĞĞĞĞ«Ğ™ systemd unit Ñ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒÑ

[Unit]
Description=Telegram WireGuard Bot (Production Hardened)
After=network-online.target
Wants=network-online.target
Documentation=https://github.com/YOUR_USERNAME/telegram-wg-bot

[Service]
Type=simple
User=wg-bot
Group=wg-bot
WorkingDirectory=/opt/telegram-wg-bot

# ğŸ” Ğ¡Ğ•ĞšĞ Ğ•Ğ¢Ğ« Ğ˜ ĞŸĞ•Ğ Ğ•ĞœĞ•ĞĞĞ«Ğ•
EnvironmentFile=/etc/telegram-wg-bot/.env
Environment=PATH=/opt/telegram-wg-bot/venv/bin
Environment=PYTHONUNBUFFERED=1
Environment=PYTHONDONTWRITEBYTECODE=1

# ğŸš€ Ğ—ĞĞŸĞ£Ğ¡Ğš
ExecStart=/opt/telegram-wg-bot/venv/bin/python -X utf8 -O main.py
ExecReload=/bin/kill -HUP $MAINPID

# ğŸ”„ ĞĞĞ”Ğ•Ğ–ĞĞĞ¡Ğ¢Ğ¬
Restart=on-failure
RestartSec=5
TimeoutStartSec=60
TimeoutStopSec=30
KillSignal=SIGINT
KillMode=mixed
WatchdogSec=60

# ğŸ“ ĞĞ’Ğ¢ĞĞœĞĞ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ• Ğ”Ğ˜Ğ Ğ•ĞšĞ¢ĞĞ Ğ˜Ğ˜ (Ğ²Ğ¼ĞµÑÑ‚Ğ¾ tmpfiles.d)
StateDirectory=telegram-wg-bot
LogsDirectory=telegram-wg-bot
StateDirectoryMode=0750
LogsDirectoryMode=0750

# ğŸ›¡ï¸ Ğ‘ĞĞ—ĞĞ’Ğ«Ğ• ĞĞ“Ğ ĞĞĞ˜Ğ§Ğ•ĞĞ˜Ğ¯ Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ˜
NoNewPrivileges=true
UMask=0077

# ğŸ  Ğ˜Ğ—ĞĞ›Ğ¯Ğ¦Ğ˜Ğ¯ Ğ¤ĞĞ™Ğ›ĞĞ’ĞĞ™ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«
PrivateTmp=true
PrivateDevices=true
ProtectSystem=strict
ProtectHome=true
ProtectKernelTunables=true
ProtectKernelLogs=true
ProtectKernelModules=true
ProtectControlGroups=true
ProtectHostname=true
ProtectClock=true

# ğŸ‘ï¸ Ğ˜Ğ—ĞĞ›Ğ¯Ğ¦Ğ˜Ğ¯ ĞŸĞ ĞĞ¦Ğ•Ğ¡Ğ¡ĞĞ’
ProtectProc=invisible
ProcSubset=pid
PrivateUsers=false

# ğŸ”— Ğ¡Ğ•Ğ¢Ğ•Ğ’Ğ«Ğ• ĞĞ“Ğ ĞĞĞ˜Ğ§Ğ•ĞĞ˜Ğ¯
RestrictAddressFamilies=AF_UNIX AF_INET AF_INET6
SocketBindDeny=any
SocketBindAllow=tcp:8080

# ğŸš« Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞĞ«Ğ• Ğ’Ğ«Ğ—ĞĞ’Ğ« Ğ˜ Ğ’ĞĞ—ĞœĞĞ–ĞĞĞ¡Ğ¢Ğ˜
SystemCallFilter=~@mount @swap @module @raw-io @reboot @clock @debug @obsolete
SystemCallErrorNumber=EPERM
RestrictSUIDSGID=true
RestrictNamespaces=true
RestrictRealtime=true
LockPersonality=true
MemoryDenyWriteExecute=true

# ğŸ”‘ Ğ£Ğ”ĞĞ›Ğ•ĞĞ˜Ğ• CAPABILITIES
CapabilityBoundingSet=
AmbientCapabilities=
RemoveIPC=true

# ğŸ“ Ğ›ĞĞ“Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ• (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ journald)
StandardOutput=journal
StandardError=journal
SyslogIdentifier=telegram-wg-bot
SyslogLevel=info

# ğŸ“‚ Ğ ĞĞ—Ğ Ğ•Ğ¨Ğ•ĞĞĞ«Ğ• ĞŸĞ£Ğ¢Ğ˜ Ğ”Ğ›Ğ¯ Ğ—ĞĞŸĞ˜Ğ¡Ğ˜
ReadWritePaths=/var/lib/telegram-wg-bot /var/log/telegram-wg-bot /etc/wireguard/clients

# âš¡ Ğ Ğ•Ğ¡Ğ£Ğ Ğ¡ĞĞ«Ğ• ĞĞ“Ğ ĞĞĞ˜Ğ§Ğ•ĞĞ˜Ğ¯
LimitNOFILE=65536
LimitNPROC=100
MemoryHigh=512M
MemoryMax=1G
TasksMax=50

[Install]
WantedBy=multi-user.target
